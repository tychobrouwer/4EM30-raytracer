/*------------------------------------------------------------------------------
 *  This file is part of a small RayTracer code, that is used in the course
 *  Scientific Computing for Mechanical Engineering (4EM30) at the Department
 *  Mechanical Engineering at Eindhoven University of Technology.
 *
 *  (c) 2020-2024 Joris Remmers, TU/e
 *
 *  Versions:
 *  03/02/2020 | J.Remmers    | First version
 *  12/02/2023 | J.Remmers    | Cleaning up code
 *----------------------------------------------------------------------------*/

#ifndef UTIL_FILM_H
#define UTIL_FILM_H

#include <stdio.h>
#include "color.h"

//------------------------------------------------------------------------------
//  TODO: COMPLETE FUNCTION DESCRIPTIONS AND CONTRACTS
//------------------------------------------------------------------------------


typedef struct
{
  char*           filename;
  unsigned char   data[];
} BMPFile;


//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------


typedef struct
{
  Color           c;
  float           wght;
} Pixel;


//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------


typedef struct
{
  int             height;
  int             width;
  Pixel           p[];
} Film;


//------------------------------------------------------------------------------
//  
//------------------------------------------------------------------------------


Film *readFilmData

  ( FILE*         in );


//------------------------------------------------------------------------------
//  
//------------------------------------------------------------------------------


Film *createFilm 

  ( int           height , 
    int           width  );


//------------------------------------------------------------------------------
//  
//------------------------------------------------------------------------------


void storePixelRGB
  
  ( Film*         film  ,
    int           i     , 
    int           j     ,
    Color*        color );


//------------------------------------------------------------------------------
//  
//------------------------------------------------------------------------------


unsigned char* createBitmapFileHeader

  ( int           height     , 
    int           width      , 
    int           paddingSize);


//------------------------------------------------------------------------------
//  
//------------------------------------------------------------------------------


unsigned char* createBitmapInfoHeader

  ( int           height , 
    int           width  );


//------------------------------------------------------------------------------
//  
//------------------------------------------------------------------------------


void saveToBitmap

  ( Film*         film          , 
    char*         imageFileName );

#endif
